System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerController.ts"],(function(t){"use strict";var e,r,n,i,a,s,o,l,u,c,h,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.createClass,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,l=t.Prefab,u=t.Node,c=t.Label,h=t.instantiate,p=t.Component},function(t){f=t.PlayerController}],execute:function(){var b,d,_,y,N,S,T,g,G,I,L,m;s._RF.push({},"6b5f4TBXqxFA6CN5woxmM/Y","GameManager",void 0);var v,B,C=o.ccclass,P=o.property;!function(t){t[t.GS_INIT=0]="GS_INIT",t[t.GS_PLAYING=1]="GS_PLAYING",t[t.GS_END=2]="GS_END"}(v||(v={})),function(t){t[t.BT_NONE=0]="BT_NONE",t[t.BT_STONE=1]="BT_STONE"}(B||(B={}));t("GameManager",(b=C("GameManager"),d=P({type:l}),_=P({type:f}),y=P({type:u}),N=P({type:c}),b((g=e((T=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,i(e,"cubePrfb",g,a(e)),i(e,"roadLength",G,a(e)),e._road=[],i(e,"playerCtrl",I,a(e)),i(e,"startMenu",L,a(e)),i(e,"stepsLabel",m,a(e)),e}r(e,t);var s=e.prototype;return s.start=function(){var t;this.curState=v.GS_INIT,null==(t=this.playerCtrl)||t.node.on("JumpEnd",this.onPlayerJumpEnd,this)},s.init=function(){this.startMenu&&(this.startMenu.active=!0),this.generateRoad(),this.playerCtrl&&(this.playerCtrl.setInputActive(!1),this.playerCtrl.reset())},s.onStartButtonClicked=function(){this.curState=v.GS_PLAYING},s.generateRoad=function(){this.node.removeAllChildren(),this._road=[],this._road.push(B.BT_STONE);for(var t=1;t<this.roadLength;t++)this._road[t-1]===B.BT_NONE?this._road.push(B.BT_STONE):this._road.push(Math.floor(2*Math.random()));for(var e=0;e<this._road.length;e++){var r=this.spawnBlockByType(this._road[e]);r&&(this.node.addChild(r),r.setPosition(e,-1.5,0))}},s.spawnBlockByType=function(t){if(!this.cubePrfb)return null;var e=null;switch(t){case B.BT_STONE:e=h(this.cubePrfb)}return e},s.checkResult=function(t){t<this.roadLength?this._road[t]==B.BT_NONE&&(this.curState=v.GS_INIT):this.curState=v.GS_INIT},s.onPlayerJumpEnd=function(t){this.stepsLabel&&(this.stepsLabel.string=""+(t>=this.roadLength?this.roadLength:t)),this.checkResult(t)},n(e,[{key:"curState",set:function(t){var e=this;switch(t){case v.GS_INIT:this.init();break;case v.GS_PLAYING:this.startMenu&&(this.startMenu.active=!1),this.stepsLabel&&(this.stepsLabel.string="0"),setTimeout((function(){e.playerCtrl&&e.playerCtrl.setInputActive(!0)}),.1);break;case v.GS_END:}}}]),e}(p)).prototype,"cubePrfb",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(T.prototype,"roadLength",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),I=e(T.prototype,"playerCtrl",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(T.prototype,"startMenu",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(T.prototype,"stepsLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=T))||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameManager.ts","./PlayerController.ts"],(function(){"use strict";return{setters:[null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,s,n,u,r,p,c,h,a,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,u=t._decorator,r=t.Animation,p=t.SkeletalAnimation,c=t.input,h=t.Input,a=t.Vec3,m=t.Component}],execute:function(){var _,l,d,P,y,f,J;n._RF.push({},"7aa6bwohhNOqpaRHphwY5s+","PlayerController",void 0);var S=u.ccclass,g=u.property;t("PlayerController",(_=S("PlayerController"),l=g({type:r}),d=g({type:p}),_((f=e((y=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),u=0;u<i;u++)n[u]=arguments[u];return e=t.call.apply(t,[this].concat(n))||this,o(e,"BodyAnim",f,s(e)),o(e,"CocosAnim",J,s(e)),e._startJump=!1,e._jumpStep=0,e._curJumpTime=0,e._jumpTime=.3,e._curJumpSpeed=0,e._curPos=new a,e._deltaPos=new a(0,0,0),e._targetPos=new a,e._curMoveIndex=0,e}i(e,t);var n=e.prototype;return n.start=function(){},n.setInputActive=function(t){t?c.on(h.EventType.MOUSE_UP,this.onMouseUp,this):c.off(h.EventType.MOUSE_UP,this.onMouseUp,this)},n.onMouseUp=function(t){0===t.getButton()?this.jumpByStep(1):2===t.getButton()&&this.jumpByStep(2)},n.jumpByStep=function(t){this._startJump||(this._startJump=!0,this._jumpStep=t,this._curJumpTime=0,this._curJumpSpeed=this._jumpStep/this._jumpTime,this.node.getPosition(this._curPos),a.add(this._targetPos,this._curPos,new a(this._jumpStep,0,0)),this._curMoveIndex+=t,this.CocosAnim&&(this.CocosAnim.getState("cocos_anim_jump").speed=3.5,this.CocosAnim.play("cocos_anim_jump")))},n.onOnceJumpEnd=function(){this.CocosAnim&&this.CocosAnim.play("cocos_anim_idle"),this.node.emit("JumpEnd",this._curMoveIndex)},n.update=function(t){this._startJump&&(this._curJumpTime+=t,this._curJumpTime>this._jumpTime?(this.node.setPosition(this._targetPos),this._startJump=!1,this.onOnceJumpEnd()):(this.node.getPosition(this._curPos),this._deltaPos.x=this._curJumpSpeed*t,a.add(this._curPos,this._curPos,this._deltaPos),this.node.setPosition(this._curPos)))},n.reset=function(){this.node.setPosition(a.ZERO),this._curMoveIndex=0,this._curPos=new a,this._targetPos=new a,this._curJumpTime=0,this._deltaPos=new a,this._jumpStep=0,this._curJumpTime=0},e}(m)).prototype,"BodyAnim",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(y.prototype,"CocosAnim",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=y))||P));n._RF.pop()}}}));
